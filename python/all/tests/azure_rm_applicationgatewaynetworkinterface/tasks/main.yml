- name: Prepare random number
  set_fact:
    random_postfix: "{{ 1000 | random }}"
  run_once: yes

- name: Create instance of NetworkInterfaces -- check mode
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    network_security_group:
      security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
      default_security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
    ip_configurations:
      - application_gateway_backend_address_pools:
          - backend_ip_configurations:
              - application_gateway_backend_address_pools:
                  - backend_ip_configurations:
                    backend_addresses:
                load_balancer_backend_address_pools:
                load_balancer_inbound_nat_rules:
                subnet:
                  service_endpoints:
                  resource_navigation_links:
                public_ip_address:
                  zones:
                    - XXXX - list of values -- not implemented str
                application_security_groups:
            backend_addresses:
        load_balancer_backend_address_pools:
        load_balancer_inbound_nat_rules:
        subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        application_security_groups:
    dns_settings:
      dns_servers:
        - XXXX - list of values -- not implemented str
      applied_dns_servers:
        - XXXX - list of values -- not implemented str
  check_mode: yes
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed

- name: Create instance of NetworkInterfaces
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    network_security_group:
      security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
      default_security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
    ip_configurations:
      - application_gateway_backend_address_pools:
          - backend_ip_configurations:
              - application_gateway_backend_address_pools:
                  - backend_ip_configurations:
                    backend_addresses:
                load_balancer_backend_address_pools:
                load_balancer_inbound_nat_rules:
                subnet:
                  service_endpoints:
                  resource_navigation_links:
                public_ip_address:
                  zones:
                    - XXXX - list of values -- not implemented str
                application_security_groups:
            backend_addresses:
        load_balancer_backend_address_pools:
        load_balancer_inbound_nat_rules:
        subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        application_security_groups:
    dns_settings:
      dns_servers:
        - XXXX - list of values -- not implemented str
      applied_dns_servers:
        - XXXX - list of values -- not implemented str
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed
      - output.state == 'Ready'

- name: Create again instance of NetworkInterfaces
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    network_security_group:
      security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
      default_security_rules:
        - source_address_prefixes:
            - XXXX - list of values -- not implemented str
          source_application_security_groups:
          destination_address_prefixes:
            - XXXX - list of values -- not implemented str
          destination_application_security_groups:
          source_port_ranges:
            - XXXX - list of values -- not implemented str
          destination_port_ranges:
            - XXXX - list of values -- not implemented str
    ip_configurations:
      - application_gateway_backend_address_pools:
          - backend_ip_configurations:
              - application_gateway_backend_address_pools:
                  - backend_ip_configurations:
                    backend_addresses:
                load_balancer_backend_address_pools:
                load_balancer_inbound_nat_rules:
                subnet:
                  service_endpoints:
                  resource_navigation_links:
                public_ip_address:
                  zones:
                    - XXXX - list of values -- not implemented str
                application_security_groups:
            backend_addresses:
        load_balancer_backend_address_pools:
        load_balancer_inbound_nat_rules:
        subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        application_security_groups:
    dns_settings:
      dns_servers:
        - XXXX - list of values -- not implemented str
      applied_dns_servers:
        - XXXX - list of values -- not implemented str
  register: output
- name: Assert the state has not changed
  assert:
    that:
      - output.changed == false
      - output.state == 'Ready'

- name: Delete instance of NetworkInterfaces -- check mode
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    state: absent
  check_mode: yes
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete instance of NetworkInterfaces
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete unexisting instance of NetworkInterfaces
  azure_rm_applicationgatewaynetworkinterface:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed == false
