- name: Prepare random number
  set_fact:
    random_postfix: "{{ 1000 | random }}"
  run_once: yes

- name: Create instance of RouteFilters -- check mode
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    rules:
      - communities:
          - XXXX - list of values -- not implemented str
    peerings:
      - microsoft_peering_config:
          advertised_public_prefixes:
            - XXXX - list of values -- not implemented str
          advertised_communities:
            - XXXX - list of values -- not implemented str
        route_filter:
          rules:
            - communities:
                - XXXX - list of values -- not implemented str
          peerings:
            - microsoft_peering_config:
                advertised_public_prefixes:
                  - XXXX - list of values -- not implemented str
                advertised_communities:
                  - XXXX - list of values -- not implemented str
              route_filter:
                rules:
                peerings:
        ipv6_peering_config:
          microsoft_peering_config:
            advertised_public_prefixes:
              - XXXX - list of values -- not implemented str
            advertised_communities:
              - XXXX - list of values -- not implemented str
          route_filter:
            rules:
              - communities:
                  - XXXX - list of values -- not implemented str
            peerings:
  check_mode: yes
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed

- name: Create instance of RouteFilters
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    rules:
      - communities:
          - XXXX - list of values -- not implemented str
    peerings:
      - microsoft_peering_config:
          advertised_public_prefixes:
            - XXXX - list of values -- not implemented str
          advertised_communities:
            - XXXX - list of values -- not implemented str
        route_filter:
          rules:
            - communities:
                - XXXX - list of values -- not implemented str
          peerings:
            - microsoft_peering_config:
                advertised_public_prefixes:
                  - XXXX - list of values -- not implemented str
                advertised_communities:
                  - XXXX - list of values -- not implemented str
              route_filter:
                rules:
                peerings:
        ipv6_peering_config:
          microsoft_peering_config:
            advertised_public_prefixes:
              - XXXX - list of values -- not implemented str
            advertised_communities:
              - XXXX - list of values -- not implemented str
          route_filter:
            rules:
              - communities:
                  - XXXX - list of values -- not implemented str
            peerings:
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed
      - output.state == 'Ready'

- name: Create again instance of RouteFilters
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    rules:
      - communities:
          - XXXX - list of values -- not implemented str
    peerings:
      - microsoft_peering_config:
          advertised_public_prefixes:
            - XXXX - list of values -- not implemented str
          advertised_communities:
            - XXXX - list of values -- not implemented str
        route_filter:
          rules:
            - communities:
                - XXXX - list of values -- not implemented str
          peerings:
            - microsoft_peering_config:
                advertised_public_prefixes:
                  - XXXX - list of values -- not implemented str
                advertised_communities:
                  - XXXX - list of values -- not implemented str
              route_filter:
                rules:
                peerings:
        ipv6_peering_config:
          microsoft_peering_config:
            advertised_public_prefixes:
              - XXXX - list of values -- not implemented str
            advertised_communities:
              - XXXX - list of values -- not implemented str
          route_filter:
            rules:
              - communities:
                  - XXXX - list of values -- not implemented str
            peerings:
  register: output
- name: Assert the state has not changed
  assert:
    that:
      - output.changed == false
      - output.state == 'Ready'

- name: Delete instance of RouteFilters -- check mode
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    state: absent
  check_mode: yes
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete instance of RouteFilters
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete unexisting instance of RouteFilters
  azure_rm_applicationgatewayroutefilter:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed == false
