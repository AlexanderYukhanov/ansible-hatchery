- name: Prepare random number
  set_fact:
    random_postfix: "{{ 1000 | random }}"
  run_once: yes

- name: Create instance of LoadBalancers -- check mode
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    frontend_ip_configurations:
      - subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        zones:
          - XXXX - list of values -- not implemented str
    backend_address_pools:
    load_balancing_rules:
    probes:
    inbound_nat_rules:
    inbound_nat_pools:
    outbound_nat_rules:
      - frontend_ip_configurations:
  check_mode: yes
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed

- name: Create instance of LoadBalancers
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    frontend_ip_configurations:
      - subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        zones:
          - XXXX - list of values -- not implemented str
    backend_address_pools:
    load_balancing_rules:
    probes:
    inbound_nat_rules:
    inbound_nat_pools:
    outbound_nat_rules:
      - frontend_ip_configurations:
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed
      - output.state == 'Ready'

- name: Create again instance of LoadBalancers
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    frontend_ip_configurations:
      - subnet:
          network_security_group:
            security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
            default_security_rules:
              - source_address_prefixes:
                  - XXXX - list of values -- not implemented str
                source_application_security_groups:
                destination_address_prefixes:
                  - XXXX - list of values -- not implemented str
                destination_application_security_groups:
                source_port_ranges:
                  - XXXX - list of values -- not implemented str
                destination_port_ranges:
                  - XXXX - list of values -- not implemented str
          route_table:
            routes:
          service_endpoints:
            - locations:
                - XXXX - list of values -- not implemented str
          resource_navigation_links:
        public_ip_address:
          zones:
            - XXXX - list of values -- not implemented str
        zones:
          - XXXX - list of values -- not implemented str
    backend_address_pools:
    load_balancing_rules:
    probes:
    inbound_nat_rules:
    inbound_nat_pools:
    outbound_nat_rules:
      - frontend_ip_configurations:
  register: output
- name: Assert the state has not changed
  assert:
    that:
      - output.changed == false
      - output.state == 'Ready'

- name: Delete instance of LoadBalancers -- check mode
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    state: absent
  check_mode: yes
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete instance of LoadBalancers
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed

- name: Delete unexisting instance of LoadBalancers
  azure_rm_applicationgatewayloadbalancer:
    resource_group: "{{ resource_group }}"
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed == false
